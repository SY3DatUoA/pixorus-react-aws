import React__default from 'react';
import { useAuthenticator } from '@aws-amplify/ui-react-core';
import { authenticatorTextUtil } from '@aws-amplify/ui';
import '../../../primitives/Alert/Alert.mjs';
import '../../../primitives/Autocomplete/Autocomplete.mjs';
import '../../../primitives/Avatar/Avatar.mjs';
import '../../../primitives/Badge/Badge.mjs';
import '../../../primitives/Breadcrumbs/Breadcrumbs.mjs';
import { Button } from '../../../primitives/Button/Button.mjs';
import '../../../primitives/ButtonGroup/ButtonGroup.mjs';
import '../../../primitives/Card/Card.mjs';
import '../../../primitives/Checkbox/Checkbox.mjs';
import '../../../primitives/CheckboxField/CheckboxField.mjs';
import '../../../primitives/Collection/Collection.mjs';
import { Divider } from '../../../primitives/Divider/Divider.mjs';
import '../../../primitives/DropZone/DropZone.mjs';
import '../../../primitives/Accordion/Accordion.mjs';
import '../../../primitives/FieldGroupIcon/FieldGroupIcon.mjs';
import '../../../primitives/FieldGroupIcon/FieldGroupIconButton.mjs';
import '../../../primitives/Fieldset/Fieldset.mjs';
import '../../../primitives/Fieldset/useFieldset.mjs';
import { Flex } from '../../../primitives/Flex/Flex.mjs';
import '../../../primitives/Grid/Grid.mjs';
import '../../../primitives/Heading/Heading.mjs';
import '../../../primitives/HighlightMatch/HighlightMatch.mjs';
import '../../../primitives/Icon/Icon.mjs';
import '../../../primitives/Icon/context/IconsContext.mjs';
import '../../../primitives/View/View.mjs';
import '../../../primitives/Image/Image.mjs';
import '../../../primitives/Input/Input.mjs';
import '../../../primitives/Label/Label.mjs';
import '../../../primitives/Link/Link.mjs';
import '../../../primitives/Loader/Loader.mjs';
import '../../../primitives/Menu/Menu.mjs';
import '../../../primitives/Menu/MenuButton.mjs';
import '../../../primitives/Menu/MenuItem.mjs';
import '../../../primitives/Message/Message.mjs';
import '../../../primitives/Pagination/Pagination.mjs';
import { PasswordField } from '../../../primitives/PasswordField/PasswordField.mjs';
import '../../../primitives/PhoneNumberField/PhoneNumberField.mjs';
import '../../../primitives/Placeholder/Placeholder.mjs';
import '../../../primitives/Radio/Radio.mjs';
import '../../../primitives/RadioGroupField/RadioGroupField.mjs';
import '../../../primitives/Rating/Rating.mjs';
import '../../../primitives/ScrollView/ScrollView.mjs';
import '../../../primitives/SearchField/SearchField.mjs';
import '../../../primitives/SelectField/SelectField.mjs';
import '../../../primitives/SliderField/SliderField.mjs';
import '../../../primitives/StepperField/StepperField.mjs';
import '../../../primitives/SwitchField/SwitchField.mjs';
import '../../../primitives/Table/Table.mjs';
import '../../../primitives/Table/TableBody.mjs';
import '../../../primitives/Table/TableCell.mjs';
import '../../../primitives/Table/TableFoot.mjs';
import '../../../primitives/Table/TableHead.mjs';
import '../../../primitives/Table/TableRow.mjs';
import '../../../primitives/Tabs/Tabs.mjs';
import '../../../primitives/Text/Text.mjs';
import '../../../primitives/TextAreaField/TextAreaField.mjs';
import { TextField } from '../../../primitives/TextField/TextField.mjs';
import '../../../primitives/ToggleButton/ToggleButton.mjs';
import '../../../primitives/ToggleButtonGroup/ToggleButtonGroup.mjs';
import '../../../primitives/VisuallyHidden/VisuallyHidden.mjs';
import '../shared/ConfirmSignInFooter.mjs';
import '../shared/TwoButtonSubmitFooter.mjs';
import { RemoteErrorMessage } from '../shared/RemoteErrorMessage.mjs';
import '../shared/SignInSignUpTabs.mjs';
import { useFormHandlers } from '../hooks/useFormHandlers/useFormHandlers.mjs';
import { RouteContainer } from '../RouteContainer/RouteContainer.mjs';

const { getSignInWithPasswordText, getSignInWithEmailText, getSignInWithSmsText, getSignInWithPasskeyText, getSigningInText, getBackToSignInText, getOrText, getUsernameLabelByLoginMechanism, } = authenticatorTextUtil;
const getMethodButtonLabel = (method) => {
    switch (method) {
        case 'EMAIL_OTP':
            return getSignInWithEmailText();
        case 'SMS_OTP':
            return getSignInWithSmsText();
        case 'WEB_AUTHN':
            return getSignInWithPasskeyText();
        case 'PASSWORD':
            return getSignInWithPasswordText();
        default:
            return getSignInWithPasswordText();
    }
};
const SignInSelectAuthFactor = ({ className, variation, }) => {
    const { isPending, username, availableAuthMethods, toSignIn, selectAuthMethod, loginMechanism, } = useAuthenticator((context) => [
        context.isPending,
        context.username,
        context.availableAuthMethods,
        context.toSignIn,
        context.selectAuthMethod,
        context.loginMechanism,
    ]);
    const { handleChange, handleSubmit } = useFormHandlers();
    const methods = (availableAuthMethods ?? []);
    const hasPassword = methods.includes('PASSWORD');
    const passwordlessMethods = methods.filter((m) => m !== 'PASSWORD');
    const handleMethodSelect = (method) => {
        selectAuthMethod({ method });
    };
    const usernameLabel = getUsernameLabelByLoginMechanism(loginMechanism);
    return (React__default.createElement(RouteContainer, { className: className, variation: variation },
        React__default.createElement("form", { "data-amplify-form": true, "data-amplify-authenticator-signinselect": true, method: "post", onSubmit: handleSubmit, onChange: handleChange },
            React__default.createElement(Flex, { direction: "column" },
                React__default.createElement(TextField, { label: usernameLabel, name: "username", value: username, isReadOnly: true, isDisabled: true }),
                hasPassword && (React__default.createElement(React__default.Fragment, null,
                    React__default.createElement(PasswordField, { label: "Password", name: "password", autoComplete: "current-password", isDisabled: isPending }),
                    React__default.createElement(Button, { isDisabled: isPending, type: "submit", variation: "primary", isFullWidth: true, isLoading: isPending, loadingText: getSigningInText() }, getSignInWithPasswordText()))),
                hasPassword && passwordlessMethods.length > 0 && (React__default.createElement(Divider, { label: getOrText() })),
                passwordlessMethods.length > 0 && (React__default.createElement(Flex, { direction: "column", gap: "0.5rem" }, passwordlessMethods.map((method) => (React__default.createElement(Button, { key: method, variation: "primary", isFullWidth: true, isDisabled: isPending, onClick: () => handleMethodSelect(method) }, getMethodButtonLabel(method)))))),
                React__default.createElement(RemoteErrorMessage, null),
                React__default.createElement(Button, { onClick: toSignIn, size: "small", variation: "link", isDisabled: isPending }, getBackToSignInText())))));
};

export { SignInSelectAuthFactor };
